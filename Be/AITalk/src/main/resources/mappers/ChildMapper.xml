<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.aitalk.child.mapper.ChildMapper">
    <resultMap id="Child" type="com.ssafy.aitalk.child.entity.Child">
        <id property="childId" column="child_id"/>
        <result property="therapistId" column="therapist_id"/>
        <result property="centerId" column="center_id"/>
        <result property="childName" column="child_name"/>
        <result property="protectorNumber" column="protector_number"/>
        <result property="profileImage" column="profile_image"/>
        <result property="disabilityType" column="disability_type"/>
        <result property="age" column="age"/>
    </resultMap>


    <insert id="registerChild" >
        INSERT INTO care_children (
            therapist_id,
            center_id,
            child_name,
            protector_number,
            profile_image,
            disability_type,
            age
        )
        VALUES (
                   #{therapistId},
                   #{centerId},
                   #{childName},
                   #{protectorNumber},
                   #{profileImage},
                   #{disabilityType},
                   #{age}
               )
    </insert>

    <select id="isRegisteredChild" resultType="int">
        SELECT COUNT(*)
        FROM care_children
        WHERE protector_number = #{protectorNumber}
          AND child_name = #{childName}
    </select>
</mapper>